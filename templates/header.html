<!DOCTYPE html>
<html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<script type="text/javascript" src="{{.CDN}}/assets/{{.MainJS}}"></script>
<link rel="stylesheet" type="text/css" href="{{.CDN}}/assets/{{.MainCSS}}">
<link rel='icon' type='image/png' href='{{.CDN}}/assets/favicon.png'>

<!--[if lte IE 8]>
<style>
    .simple-check { display: inline !important; }
    .simple-check + label:before { display: none !important; }
    .simple-check + label { color: black !important; text-decoration: none !important; }
    .dropdown { border: solid 1px #aaa !important; }
</style>
<![endif]-->

<body>
<div id="header">
    <ul id="navibar">
        <li id="nv-index" class="link"><a href="/">[[Index]]</a></li>
        <li id="nv-articles" class="link"><a href="/page/1">[[All Articles]]</a></li>
        <li id="nv-tags" class="link"><a href="/tags">[[Tags]]</a></li>
        <li id="nv-article" class="link hide"><a>[[Article]]</a></li>
        <li id="nv-user-articles" class="link hide"><a>[[User Articles]]</a></li>
        <li id="nv-tag-articles" class="link hide"><a>[[Tagged Articles]]</a></li>
        <li id="nv-replies" class="link hide"><a>[[Article Replies]]</a></li>
        <li id="nv-new-article" class="link hide"><a href="/new/article/0">[[Post]]</a></li>
        <li id="nv-gallery" class="link"><a href="/gallery/0/page/1">[[Gallery]]</a></li>
        <li id="nv-uploader" class="link hide"><a href="/uploader">[[Upload]]</a></li>
        <li id="nv-console" class="link"><a href="/account" id="nv-console-a">[[Console]]</a></li>
        <li id="nv-user" class="link hide"><a>[[User]]</a></li>
        <li id="nv-my-gallery" class="link hide"><a>[[My Gallery]]</a></li>
        <li id="nv-owa" class="link hide"><a>[[Iceberg]]</a></li>
        <li id="nv-message" class="link hide"><a>[[Private Message]]</a></li>
        <li id="nv-register" class="link hide"><a>[[Sign Up]]</a></li>
        <li id="nv-database" class="link hide"><a>[[Database]]</a></li>
        <li id="nv-config" class="link hide"><a>[[Config]]</a></li>
        <li id="nv-bootstrap" class="link hide"><a>[[Templates]]</a></li>
    </ul>
    <div id="pageline"><hr style="display:none;"></div>

    <script type="text/javascript">
        window.__title = "{{.Title}}";
        window.__cdn = "{{.CDN}}";
        window.__image = "{{.ImageServer}}";
        window.__loadingImg = "{{.CDN}}/assets/images/loading.gif";
        window.__crossImg = "{{.CDN}}/assets/images/cross.png";
        window.__logoImg = "{{.CDN}}/assets/images/inazuma.svg";

        etc.id("{{.CurrentNav}}").className = "current"
        etc.id("nv-console-a").href += "?" + window.location.href;

        window.__unread = parseInt(etc.util.cookie.read("unread"));

        if (window.__unread > 0) {
            etc.id("nv-console-a").innerHTML += "(" + window.__unread + ")";
        }

        function i18n(upl) {
            if (upl) {
                etc.util.cookie.write("upl", upl, 3600 * 24 * 1000 * 365);
                if (upl == "zh-tw") {
                    etc.util.cookie.write("trad", "1", 3600 * 24 * 1000 * 365);
                } else {
                    etc.util.cookie.remove("trad");
                }
                return;
            }

            var lang = window.navigator.userLanguage || window.navigator.language;

            if (lang.toLowerCase() == "zh-tw" || etc.util.cookie.read("trad") == "1") {
                etc.util.cookie.write("trad", "1", 3600 * 24 * 1000 * 365);
                etc.util.cookie.write("upl", "zh-cn", 3600 * 24 * 1000 * 365);

                etc.util.lazyLoad([
                    "/assets/tongwen/tongwen_core.js",
                    "/assets/tongwen/tongwen_table_ps2t.js",
                    "/assets/tongwen/tongwen_table_s2t.js",
                    "/assets/tongwen/tongwen_table_ss2t.js",
                ], function() {
                    if (TongWen) 
                        TongWen.trans2Trad(document);
                });
            }

            if (lang.toLowerCase() == "en-us") {
                etc.util.cookie.write("upl", "en-us", 3600 * 24 * 1000 * 365);
            }
        }

        etc.onload(function() { i18n(); });

        function buildPager(IsIndexPage, IsLastPage, 
            IndexPage, LastPage, PrevPage, NextPage, 
            LastWeekPage, LastMonthPage, LastYearPage, LastDayPage) {
            var html = ['<table class="pager"><tr>'];

            if (IsIndexPage)
                html.push('<td class="nc"><b>[[Index]]</b></td>');
            else {
                html.push('<td class="c"><a href="' + IndexPage +  '">[[Index]]</a></td>');
                html.push('<td class="c"><a href="' + PrevPage + '">[[Prev]]</a></td>');
            }

            if (IsLastPage)
                html.push('<td class="nc"><b>[[Last]]</b></td>');
            else {
                html.push('<td class="c n next"><a href="' + NextPage + '">[[Next]]</a></td>');
                if (LastDayPage) {
                    html.push('<td class="c n l t"><a href="' + LastDayPage + '">[[Day]]</a></td>');
                    html.push('<td class="c n l"><a href="' + LastWeekPage + '">[[Week]]</a></td>');
                } else {
                    html.push('<td class="c n l t"><a href="' + LastWeekPage + '">[[Week]]</a></td>');
                }
                html.push('<td class="c n l"><a href="' + LastMonthPage + '">[[Month]]</a></td>');
                if (LastYearPage)
                    html.push('<td class="c l"><a href="' + LastYearPage + '">[[Year]]</a></td>');
                html.push('<td class="c"><a href="' + LastPage + '">[[Last]]</a></td>');
            }
            
            html.push('</tr></table>');
            return html.join('');
        }

        function buildTime(Start, End) {
            var d1 = new Date(Start);
            var d2 = new Date(End);
            var pad = function(num) { return (num < 10) ? ("0" + String(num)) : String(num); }

            var stack = [
                [d1.getFullYear(), d2.getFullYear()],
                [pad(d1.getMonth() + 1), pad(d2.getMonth() + 1)],
                [pad(d1.getDate()), pad(d2.getDate())],
                [pad(d1.getHours()), pad(d2.getHours())],
                [pad(d1.getMinutes()), pad(d2.getMinutes())]
            ];
            
            var html1 = [], html2 = [];
            for (var i = 0; i < 5; i++) {
                var delim = ['/', '/', ' ', ':', ''][i];
                var color = ['ccc', 'aaa', '888', '333', '222'][i];
                if (stack[i][0] == stack[i][1] && i < 3) {
                    html1.push("<span style='color: #" + color + "'>" + stack[i][0] + delim + "</span>");
                    html2.push("<span style='color: #" + color + "'>" + stack[i][1] + delim + "</span>");
                } else {
                    html1.push("<span>" + stack[i][0] + "</span>" + delim);
                    html2.push("<span>" + stack[i][1] + "</span>" + delim);
                }
            }

            return '<span><span>'+html1.join('')+'</span> <span class="fai">&#xe01b;</span> <span>'+html2.join('')+'</span></span>';
        }
    </script>
</div>

<div id="container">